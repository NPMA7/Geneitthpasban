<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Profile Gallery</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Lemon&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: "Lemon", sans-serif;
        scroll-behavior: smooth;
        -webkit-font-smoothing: antialiased;
        margin: 20px;
      }
    </style>
  </head>
  <body>
    <section id="AboutUS" class="bg-black min-w-full py-10">
      <div
        class="relative min-w-full flex flex-wrap justify-center gap-2 pt-24"
      >
        <div class="flex flex-row flex-wrap justify-center gap-3">
          <div
            class="bg-white rounded-lg h-60 w-52 hover:drop-shadow-[8px_9px_4px_#F59E0B] transition ease-in-out"
          >
            <div class="profile-gallery" id="profileGallery1">
              <!-- Profile cards will be injected here -->
            </div>
            <a href="" class="profile-link" target="_blank" rel="noopener noreferrer">
              <h2 class="mx-2 mt-2 text-black overflow-hidden font-bold">
                Dedi Rialdi
              </h2>
              <div class="flex mt-3 text-sm items-center">
                <img class="w-6 ml-2 mr-1" src="/svg/instagram.svg" />
                <span>@</span>
                <p type="text" class="usernameInput">neednnj_</p>
              </div>
            </a>
          </div>
          <div
            class="bg-white rounded-lg h-60 w-52 hover:drop-shadow-[8px_9px_4px_#F59E0B] transition ease-in-out"
          >
            <div class="profile-gallery" id="profileGallery2">
              <!-- Profile cards will be injected here -->
            </div>
            <a href="" class="profile-link" target="_blank" rel="noopener noreferrer">
              <h2 class="mx-2 mt-2 text-black overflow-hidden font-bold">
                geneitthpasban
              </h2>
              <div class="flex mt-3 text-sm items-center">
                <img class="w-6 ml-2 mr-1" src="/svg/instagram.svg" />
                <span>@</span>
                <p type="text" class="usernameInput">geneitthpasban</p>
              </div>
            </a>
          </div>
          <div
            class="bg-white rounded-lg h-60 w-52 hover:drop-shadow-[8px_9px_4px_#F59E0B] transition ease-in-out"
          >
            <div class="profile-gallery" id="profileGallery3">
              <!-- Profile cards will be injected here -->
            </div>
            <a href="" class="profile-link" target="_blank" rel="noopener noreferrer">
              <h2 class="mx-2 mt-2 text-black overflow-hidden font-bold">
                npma
              </h2>
              <div class="flex mt-3 text-sm items-center">
                <img class="w-6 ml-2 mr-1" src="/svg/instagram.svg" />
                <span>@</span>
                <p type="text" class="usernameInput">kohaku_shinba</p>
              </div>
            </a>
          </div>
        </div>
      </div>
    </section>

    <script src="https://cdn.tailwindcss.com"></script>

    <script >async function fetchProfile(username) {
      try {
        const url = `/test/api/${username}`;
        const response = await fetch(url);
        const result = await response.json();
  
        if (result.data && result.data.length > 0) {
          const profile = result.data[0];
          const profilePicUrl =
            profile.profilePicUrl ||
            "https://www.bing.com/th?id=OIP.9YHXM-aeJCLOUldfFewIGwAAAA&w=150&h=150&c=8&rs=1&qlt=90&o=6&dpr=1.3&pid=3.1&rm=2";
  
          return {
            profilePicUrl: profilePicUrl,
            name: profile.name,
            description: profile.description,
            url_name: profile.url_name,
          };
        } else {
          console.error("No profile data found for", username);
          return null;
        }
      } catch (error) {
        console.error("Error fetching profile data:", error);
        return null;
      }
    }
  
    async function loadProfiles() {
      const profileCards = document.querySelectorAll(".profile-link");
  
      for (const card of profileCards) {
        const usernameElement = card.querySelector(".usernameInput");
        const username = usernameElement.textContent.trim();
        const profile = await fetchProfile(username);
  
        if (profile) {
          card.href = `${profile.url_name}`;
          
          const profileGallery = card.previousElementSibling; // Get the profile-gallery div
          const profileCard = document.createElement("div");
          profileCard.innerHTML = `
            <img src="${profile.profilePicUrl}" alt="Profile Picture" class="object-cover object-center w-full h-36 rounded-t-lg" />
          `;
          profileGallery.appendChild(profileCard);
        }
      }
    }
  
    window.onload = loadProfiles;</script>
  </body>
</html>
